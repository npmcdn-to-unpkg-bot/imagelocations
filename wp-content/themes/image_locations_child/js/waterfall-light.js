!function(t){function e(t,e){for(var o=n[t].top,r=0,s=o[r],i=0;i<o.length;i++)e?o[i]>s&&(s=o[i],r=i):o[i]<s&&(s=o[i],r=i);return r}function o(o){var r=i(o),s=n[r].gridWidth,l=n[r].w,a=n[r].gap,c=n[r].scrollbottom;n[r].col=1,n[r].top=[];for(var p=s.length-1;p>=0;p--)if(l>s[p]){n[r].col=p+1;break}for(var f=(l-(n[r].col-1)*a)/n[r].col,h=[],u=0;u<n[r].col;u++)h.push(u*f+u*a),n[r].top.push(0);o.children().css({position:"absolute",left:l/2-f/2+"px",top:o.scrollTop(),transition:"left "+n[r].refresh+"ms ease-in-out,top "+n[r].refresh+"ms ease-in-out,opacity "+n[r].refresh+"ms ease-in-out"}).each(function(){var o=e(r,!1);t(this).css({width:f+"px",left:h[o]+"px",top:n[r].top[o]+"px",opacity:"1"}),n[r].top[o]+=t(this)[0].offsetHeight+a}),o.css("height",n[r].top[e(r,!0)]+"px"),c&&c.endele&&c.endele.addClass("endele").text(c.endtxt).css("top",n[r].top[e(r,!0)]+"px")}function r(t){var e=i(t);n[e].timer||(n[e].timer=setInterval(function(){var r=t[0].offsetWidth;n[e].w!==r&&(n[e].w=r,o(t)),n[e].scrollbottom&&n[e].scrollbottom.callback&&s(n[e].scrollbottom.ele,n[e].scrollbottom.gap)&&n[e].scrollbottom.callback(t)},n[e].refresh)),o(t)}function s(e,o){var r=t(window).height();return r+e.scrollTop()>e.prop("scrollHeight")-o}function i(t){return t.attr("wf-id")||(l+=.1,t.attr("wf-id",l)),t.attr("wf-id")}var n={_init_:{top:!1,w:!1,col:!1,gap:10,gridWidth:[0, 300, 600, 900, 1200],refresh:500,timer:!1,scrollbottom:!1}},l=0,a={init:function(){var e=i(this);n[e]||(n[e]=t.extend({},n._init_)),arguments[0]&&(n[e]=t.extend(n[e],arguments[0])),n[e].scrollbottom&&(n[e].scrollbottom=t.extend({ele:this.parent(),endele:t("<div>").css({width:"100%",textAlign:"center",position:"absolute"}),endtxt:"No More Data",gap:300},n[e].scrollbottom)),this.css("position","relative"),r(this)},sort:function(){o(this)},stop:function(){var t=i(this);n[t].timer&&(clearInterval(n[t].timer),n[t].timer=!1)},end:function(){var t=i(this);n[t].scrollbottom&&(n[t].scrollbottom.ele.css("top",n[t].top[e(t,!0)]+"px"),this.append(n[t].scrollbottom.endele)),n[t].timer&&(clearInterval(n[t].timer),n[t].timer=!1)}};t.fn.waterfall=function(){var e;return arguments[0]&&"object"!=typeof arguments[0]?a[arguments[0]]?e=a[arguments[0]].apply(this,Array.prototype.slice.call(arguments[0],1)):t.error("Method "+arguments[0]+" does not exist on jQuery.waterfall"):e=a.init.apply(this,arguments),e||this}}(jQuery);